<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rahul R - Web Developer & Data Analyst</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="manifest" href="images/site.webmanifest">
  <style>
    /* Small inline styles just so the new boxes look presentable without needing style.css edits */
    .exp-title-row { display:flex; align-items:center; justify-content:space-between; gap:1rem; flex-wrap:wrap }
    .exp-info-boxes { display:flex; gap:1rem; align-items:center }
    .exp-info { background:#111; color:#fff; padding:0.7rem 1rem; border-radius:8px; min-width:160px; text-align:center }
    .exp-info-label { display:block; font-size:0.85rem; opacity:0.8 }
    .exp-info-value { display:block; font-size:1.15rem; font-weight:700 }
    .exp-info-sub { display:block; font-size:0.9rem; opacity:0.9 }
    @media (max-width:700px){ .exp-info-boxes{flex-direction:column;align-items:flex-start} }
  </style>
</head>
<body>

  <!-- Navbar (same as before) -->
  <nav class="navbar"> ... <!-- kept for brevity in canvas preview -->
  </nav>

  <!-- Hero -->
  <section id="home" class="hero"> ... </section>

  <!-- About -->
  <section id="about" class="section"> ... </section>

  <!-- Skills -->
  <section id="skills" class="section bg-light"> ... </section>

  <!-- Projects -->
  <section id="projects" class="section"> ... </section>

  <!-- Professional Experience -->
  <section id="experience" class="section bg-dark">
    <div class="container">
      <div class="exp-title-row">
        <h2 class="section-title">Professional Experience</h2>
        <!-- New: three boxes showing totals -->
        <div id="exp-info-boxes" class="exp-info-boxes">
          <div class="exp-info" style="background:#111;color:#fff;">
            <span class="exp-info-label">Total Experience</span>
            <span id="exp-total-txt" class="exp-info-value">Calculating...</span>
            <span class="exp-info-sub">(Work + Internship)</span>
          </div>
          <div class="exp-info" style="background:#0a4a7b;color:#fff;">
            <span class="exp-info-label">Work Experience</span>
            <span id="exp-work-txt" class="exp-info-value">Calculating...</span>
            <span class="exp-info-sub">(Paid / Full-time)</span>
          </div>
          <div class="exp-info" style="background:#4a7b0a;color:#fff;">
            <span class="exp-info-label">Internship</span>
            <span id="exp-intern-txt" class="exp-info-value">Calculating...</span>
            <span class="exp-info-sub">(Internships / Training)</span>
          </div>
        </div>
      </div>

      <div class="exp-group">
        <h3 class="exp-heading"><i class="fas fa-briefcase"></i> Work Experience</h3>
        <div class="exp-item">
          <h4>Software Development and Deployment Trainee</h4>
          <span class="exp-org">Texila Educational and Management Services (P) Ltd · Coimbatore, Tamil Nadu · Full-time</span>
          <span class="exp-date">Oct 2025 - Present</span>
          <p>Developing scalable software, cross-functional collaboration. <br>Technologies: Laravel, HTML5, JavaScript.</p>
        </div>
        <div class="exp-item">
          <h4>Software Developer</h4>
          <span class="exp-org">Meta Soft · Coimbatore, Tamil Nadu · Full-time</span>
          <span class="exp-date">Apr 2025 - Oct 2025</span>
          <p>Development, testing, web automation.<br>Technologies: Laravel, HTML5, PHP.</p>
        </div>
      </div>

      <div class="exp-group">
        <h3 class="exp-heading"><i class="fas fa-user-graduate"></i> Internship Experience</h3>
        <div class="exp-item">
          <h4>Data Analyst Intern</h4>
          <span class="exp-org">ICT Global Tech Pvt Ltd · Kochi, Kerala · Internship</span>
          <span class="exp-date">Jan 2025 - Mar 2025</span>
          <p>Statistical analysis, CRM optimization, hands-on pipelines.<br>Tools: Excel, Python.</p>
        </div>
        <div class="exp-item">
          <h4>Full-stack Developer Intern</h4>
          <span class="exp-org">Luminar Technolab · Kochi, Kerala · Internship</span>
          <span class="exp-date">Aug 2022 - Mar 2023</span>
          <p>Developed Angular web apps, enhanced UI/UX.<br>Technologies: Angular, HTML, CSS.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Education -->
  <section id="education" class="section bg-light"> ... </section>

  <!-- Contact -->
  <section id="contact" class="section"> ... </section>

  <!-- Floating Resume Download Button -->
  <div class="floating-resume-btn"> ... </div>

  <!-- Footer -->
  <footer class="footer"> ... </footer>

  <!-- Scripts for interactivity and live experience box-->
  <script>
    // Mobile Navigation Toggle (same logic as before)
    document.addEventListener('DOMContentLoaded', function () {
      const navToggle = document.querySelector('.nav-toggle');
      const navMenu = document.querySelector('.nav-menu');
      if (navToggle) {
        navToggle.addEventListener('click', function () {
          navMenu.classList.toggle('active');
          this.classList.toggle('active');
        });
        document.querySelectorAll('.nav-link').forEach(link => {
          link.addEventListener('click', () => {
            navMenu.classList.remove('active');
            navToggle.classList.remove('active');
          });
        });
        document.addEventListener('click', function (event) {
          if (!navToggle.contains(event.target) && !navMenu.contains(event.target)) {
            navMenu.classList.remove('active');
            navToggle.classList.remove('active');
          }
        });
      }
    });

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const el = document.querySelector(this.getAttribute('href'));
        if (el) el.scrollIntoView({ behavior: 'smooth' });
      });
    });

    // Experience data: each entry has a type: 'work' or 'intern'
    const workDates = [
      { type: 'intern', from: '2022-08-01', to: '2023-03-31' }, // Luminar Technolab Internship
      { type: 'intern', from: '2025-01-01', to: '2025-03-31' }, // ICT Global Tech Internship
      { type: 'work', from: '2025-04-01', to: '2025-10-16' }, // Meta Soft
      { type: 'work', from: '2025-10-16', to: null } // Texila (ongoing)
    ];

    // Helper: merge overlapping intervals and compute total milliseconds
    function mergeAndSum(intervals) {
      if (!intervals.length) return 0;
      // convert to [startMs, endMs]
      const conv = intervals.map(i => {
        const s = new Date(i[0]).getTime();
        const e = i[1] ? new Date(i[1]).getTime() : Date.now();
        return [s, e];
      }).sort((a,b)=>a[0]-b[0]);

      const merged = [];
      for (const [s,e] of conv) {
        if (!merged.length || merged[merged.length-1][1] < s) {
          merged.push([s,e]);
        } else {
          merged[merged.length-1][1] = Math.max(merged[merged.length-1][1], e);
        }
      }

      return merged.reduce((sum,[s,e]) => sum + (e - s), 0);
    }

    // Convert milliseconds to {years, months}
    function msToYearsMonths(ms) {
      const msPerYear = 365.25*24*60*60*1000;
      const msPerMonth = 30.44*24*60*60*1000;
      const years = Math.floor(ms / msPerYear);
      const months = Math.floor((ms % msPerYear) / msPerMonth);
      return { years, months };
    }

    function calcTotals(data) {
      // separate by type
      const workIntervals = data.filter(d=>d.type==='work').map(d=>[d.from, d.to]);
      const internIntervals = data.filter(d=>d.type==='intern').map(d=>[d.from, d.to]);

      const workMs = mergeAndSum(workIntervals);
      const internMs = mergeAndSum(internIntervals);
      const totalMs = mergeAndSum(data.map(d=>[d.from,d.to]));

      return {
        work: msToYearsMonths(workMs),
        intern: msToYearsMonths(internMs),
        total: msToYearsMonths(totalMs)
      };
    }

    function prettyTxt({ years, months }){
      let txt = '';
      if (years>0) txt += `${years} year${years>1? 's':''} `;
      txt += `${months} month${months!==1? 's':''}`;
      return txt;
    }

    function updateExpBox() {
      const totals = calcTotals(workDates);
      document.getElementById('exp-work-txt').textContent = prettyTxt(totals.work);
      document.getElementById('exp-intern-txt').textContent = prettyTxt(totals.intern);
      document.getElementById('exp-total-txt').textContent = prettyTxt(totals.total);
    }

    // initial update and hourly refresh
    updateExpBox();
    setInterval(updateExpBox, 60*60*1000);

    // Navigation link active state on scroll + floating button logic (kept simple)
    window.addEventListener('scroll', () => {
      const sections = document.querySelectorAll('section');
      const navLinks = document.querySelectorAll('.nav-link');
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (window.scrollY >= (sectionTop - 200)) {
          current = section.getAttribute('id');
        }
      });
      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href').substring(1) === current) {
          link.classList.add('active');
        }
      });
      const floatingBtn = document.querySelector('.floating-resume-btn');
      if (window.scrollY > 500) {
        floatingBtn.style.display = 'block';
      } else {
        floatingBtn.style.display = 'none';
      }
    });
  </script>
</body>
</html>
